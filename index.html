<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IOE Native - Authentication</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&family=Audiowide&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Thêm một chút CSS để đảm bảo giao diện không lỗi nếu file style.css chưa load kịp */
        body { background: #050505; color: #00ff88; overflow: hidden; margin: 0; }
        .wrapper { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; position: relative; z-index: 2; }
        .ioe-title { font-family: 'Audiowide'; font-size: 50px; text-shadow: 0 0 20px #00ff88; margin-bottom: 30px; }
        .login-card { background: rgba(10, 10, 10, 0.9); border: 1px solid #00ff88; padding: 40px; border-radius: 10px; width: 350px; box-shadow: 0 0 30px rgba(0, 255, 136, 0.2); }
        .field { background: #000; border: 1px solid #222; margin-bottom: 20px; padding: 10px; display: flex; align-items: center; gap: 15px; }
        .field i { color: #00ff88; width: 20px; text-align: center; }
        .field input { background: transparent; border: none; color: #fff; outline: none; width: 100%; font-family: 'JetBrains Mono'; }
        .btn-group { display: flex; flex-direction: column; gap: 10px; }
        .btn { padding: 12px; border: none; cursor: pointer; font-family: 'JetBrains Mono'; font-weight: bold; transition: 0.3s; }
        .btn-main { background: #00ff88; color: #000; }
        .btn-main:hover { box-shadow: 0 0 15px #00ff88; }
        .btn-sub { background: transparent; color: #666; font-size: 11px; text-decoration: underline; }
        #particles-js { position: absolute; width: 100%; height: 100%; z-index: 1; }
    </style>
</head>
<body>
    <div id="particles-js"></div>

    <div class="wrapper">
        <h1 class="ioe-title">IOE Native</h1>

        <div class="login-card">
            <div id="log-area">
                <div class="field">
                    <i class="fa-solid fa-envelope"></i>
                    <input type="text" id="login-email" placeholder="Email address">
                </div>
                <div class="field">
                    <i class="fa-solid fa-lock"></i>
                    <input type="password" id="login-pass" placeholder="Password">
                </div>
                <div class="btn-group">
                    <button class="btn btn-main" onclick="doLogin()">LOGIN SYSTEM</button>
                    <button class="btn btn-sub" onclick="swap()">Create an account</button>
                </div>
            </div>

            <div id="reg-area" style="display: none;">
                <div class="field">
                    <i class="fa-solid fa-user"></i>
                    <input type="text" id="name" placeholder="Full name">
                </div>
                <div class="field">
                    <i class="fa-solid fa-envelope"></i>
                    <input type="email" id="email" placeholder="Email address">
                </div>
                <div class="field">
                    <i class="fa-solid fa-lock"></i>
                    <input type="password" id="pass" placeholder="Password">
                </div>
                <div class="btn-group">
                    <button class="btn btn-main" onclick="doRegister()">SIGN UP NOW</button>
                    <button class="btn btn-sub" onclick="swap()">Already have an account?</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Khởi tạo hiệu ứng hạt (Particles)
        particlesJS("particles-js", {
            "particles": {
                "number": { "value": 80 },
                "color": { "value": "#00ff88" },
                "shape": { "type": "circle" },
                "opacity": { "value": 0.5 },
                "size": { "value": 2 },
                "line_linked": { "enable": true, "distance": 150, "color": "#00ff88", "opacity": 0.2, "width": 1 },
                "move": { "enable": true, "speed": 2 }
            }
        });

        // Hàm chuyển đổi Đăng nhập / Đăng ký
        function swap() {
            const logArea = document.getElementById('log-area');
            const regArea = document.getElementById('reg-area');
            if (logArea.style.display === 'none') {
                logArea.style.display = 'block';
                regArea.style.display = 'none';
            } else {
                logArea.style.display = 'none';
                regArea.style.display = 'block';
            }
        }

        // Logic Xử lý Đăng nhập
        function doLogin() {
            const email = document.getElementById('login-email').value;
            const pass = document.getElementById('login-pass').value;

            if (!email || !pass) {
                alert("Vui lòng điền Email và Password!");
                return;
            }

            // Lưu tên User vào localStorage để hiển thị ở trang Tool
            const displayName = email.split('@')[0].toUpperCase();
            localStorage.setItem('username', displayName);

            // Chuyển hướng sang trang Tool (/tool đã cấu hình trong server.js)
            window.location.href = '/tool';
        }

        // Logic Xử lý Đăng ký (Tạm thời cho đăng ký là xong luôn)
        function doRegister() {
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const pass = document.getElementById('pass').value;

            if (!name || !email || !pass) {
                alert("Vui lòng điền đủ thông tin đăng ký!");
                return;
            }

            alert("Đăng ký thành công! Hãy đăng nhập.");
            swap();
        }
    </script>
</body>
</html>
